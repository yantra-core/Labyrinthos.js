!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).LABY=t()}(function(){return function o(i,n,a){function s(e,t){if(!n[e]){if(!i[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(h)return h(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}r=n[e]={exports:{}},i[e][0].call(r.exports,function(t){return s(i[e][1][t]||t)},r,r.exports,o,i,n,a)}return n[e].exports}for(var h="function"==typeof require&&require,t=0;t<a.length;t++)s(a[t]);return s}({1:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Tile",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"TileMap",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"labyrinthos",{enumerable:!0,get:function(){return o.default}}),r.utils=r.terrains=r.shapes=r.mazes=void 0;var o=a(t("./lib/labyrinthos.js")),i=a(t("./lib/Tile.js")),n=a(t("./lib/TileMap.js"));function a(t){return t&&t.__esModule?t:{default:t}}r.mazes=o.default.mazes,r.terrains=o.default.terrains,r.shapes=o.default.shapes,r.utils=o.default.utils},{"./lib/Tile.js":4,"./lib/TileMap.js":5,"./lib/labyrinthos.js":7}],2:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==i(t)?t:String(t)}(o.key),o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=function(){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.name,r=t.tileset,t=t.distribution,t=void 0===t?{}:t,o=this,i=n;if(!(o instanceof i))throw new TypeError("Cannot call a class as a function");this.name=e,this.tileset=r,this.distribution=t}var t,e,r;return t=n,(e=[{key:"setDistribution",value:function(t){this.distribution=t}}])&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),n}()},{}],3:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==i(t)?t:String(t)}(o.key),o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=function(){function i(t){var e=t.tileset,r=t.axiom,o=t.rules,t=t.generations;if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.tileset=e,this.axiom=r,this.rules=o,this.generations=t}var t,e,r;return t=i,(e=[{key:"getTileId",value:function(t){t=this.tileset.getTileByName(t);return t?t.id:null}},{key:"applyRule",value:function(t,r){var e,o,i=null==(i=this.tileset.getTile(t))?void 0:i.name;return i&&this.rules[i]?(o={tileId:t,tileName:i,getTileId:this.getTileId.bind(this),random:function(t){return r.random(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0)},tileMap:{width:r.width,height:r.height,depth:r.depth||0},getNeighbors:function(t,e){return[r.getTileAt(t+1,e),r.getTileAt(t-1,e),r.getTileAt(t,e+1),r.getTileAt(t,e-1)]},position:{x:t%r.width,y:Math.floor(t/r.width),z:r.depth?Math.floor(t/(r.width*r.height)):0}},"function"==typeof this.rules[i]&&(e=[this.rules[i](o)]),"string"==typeof this.rules[i]&&(e=this.rules[i].split(" ")),this.getTileId(e[0])):t}},{key:"applyTo",value:function(e){for(var r=this,t=0;t<this.generations;t++)e.data=e.data.map(function(t){return r.applyRule(t,e)})}}])&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}()},{}],4:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==i(t)?t:String(t)}(o.key),o)}}function n(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=n(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=e.id,e=e.name,o=this,i=t;if(!(o instanceof i))throw new TypeError("Cannot call a class as a function");this.id=r,this.name=e})},{}],5:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=i(t("./util/generateTiledJSON.js")),l=i(t("./util/mersenne.js")),u=i(t("./util/noise.js"));function i(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var r;if(t)return"string"==typeof t?a(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function h(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==n(t)?t:String(t)}(o.key),o)}}r.default=function(){function d(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.x,e=void 0===e?0:e,r=t.y,r=void 0===r?0:r,o=t.width,o=void 0===o?16:o,i=t.height,i=void 0===i?16:i,n=t.depth,n=void 0===n?1:n,a=t.tileWidth,a=void 0===a?16:a,s=t.tileHeight,s=void 0===s?16:s,t=(t.is3D,this),h=d;if(!(t instanceof h))throw new TypeError("Cannot call a class as a function");this.x=e,this.y=r,this.width=o,this.height=i,this.depth=n,this.tileWidth=a,this.tileHeight=s,this.mersenneTwister=new l.default,this.Noise=new u.default,this.noise=this.Noise.noise,this.seedNoise=this.Noise.noiseSeed,this.data=this.initializeDataArray(),this.defaultRogueLike=["-","#","+","0","<",">","$","âŒ‚","@","&","?"],this.seedRandom()}var t,e,r;return t=d,(e=[{key:"initializeDataArray",value:function(){var t=1<this.depth?function(t,e,r){for(var o=[],i=0;i<r;i++)o.push(f(t,e));return o}(this.width,this.height,this.depth):f(this.width,this.height);return t}},{key:"fill",value:function(t){if(1<this.depth)for(var e=0;e<this.depth;e++)this.fill3D(t,e);else this.fill2D(t)}},{key:"fill2D",value:function(t){for(var e=0;e<this.height*this.width;e++)this.data[e]=t}},{key:"fill3D",value:function(t,e){for(var r=0;r<this.height*this.width;r++)this.data[e][r]=t}},{key:"random",value:function(t){return this.mersenneTwister.rand(t)}},{key:"seed",value:function(t){void 0===t&&(t=this.random(64e8)),this.mersenneTwister.seed(t),this.seedNoise(t)}},{key:"seedRandom",value:function(){this.seed(this.random(64e8))}},{key:"use",value:function(t,e,r){for(var o=0;o<t.height;o++)for(var i=0;i<t.width;i++){var n=i+e,a=o+r;n<this.width&&a<this.height&&(this.data[a*this.width+n]=t.data[o*t.width+i])}}},{key:"scaleToTileRange",value:function(t){for(var e=this.data,r=Math.max.apply(Math,s(e)),o=Math.min.apply(Math,s(e)),i=t-1,n=0;n<e.length;n++){var a=(e[n]-o)/(r-o);this.data[n]=Math.round(a*i)+1}}},{key:"mask",value:function(t){var e=[];if(1<this.depth){for(var r=t||this.defaultRogueLike,o=0;o<this.depth;o++){for(var i="",n=0;n<this.height;n++){for(var a=0;a<this.width;a++)i+=r[this.data[o][n*this.width+a]%r.length];i+="\n"}e.push(i)}return e}for(var s="",h=t||this.defaultRogueLike,l=0;l<this.height;l++){for(var u=0;u<this.width;u++)s+=h[this.data[l*this.width+u]%h.length];s+="\n"}return[s]}},{key:"applyBiome",value:function(r){for(var o=this,i=o.data,n=r.distribution,a=Object.keys(n),s=a.reduce(function(t,e){return t+n[e]},0),h=a.map(function(t,e){return{name:t,end:a.slice(0,e+1).reduce(function(t,e){return t+n[e]},0)/s}}),l=0;l<i.length;l++)!function(){var e=i[l],t=h.find(function(t){return e<=t.end}).name,t=r.tileset.getTileByName(t).id;o.data[l]=t}()}},{key:"getTileAt",value:function(t,e,r){return(this.is3D?this.data[r]:this.data)[e*this.width+t]}},{key:"toJSON",value:function(){return JSON.stringify({width:this.width,height:this.height,tileWidth:this.tileWidth,tileHeight:this.tileHeight,data:this.data},null,2)}},{key:"toTiledJSON",value:function(){return(0,o.default)(this)}},{key:"query",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.x,r=t.y,o=t.width,i=t.height,n=t.z,a=(t.tileName,[]);if(void 0!==e&&void 0!==r&&void 0!==o&&void 0!==i)for(var s=0;s<i;s++)for(var h=0;h<o;h++){var l=e+h,u=r+s;l>=this.width||u>=this.height?a.push(void 0):(u=u*this.width+l,this.is3D?void 0!==n&&this.data[n]&&void 0!==this.data[n][u]?a.push(this.data[n][u]):a.push(void 0):void 0!==this.data[u]?a.push(this.data[u]):a.push(void 0))}t=new d({width:o,height:i,is3D:this.is3D});return t.data=a,t}},{key:"query3D",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=t.x,o=t.y,i=t.z,n=t.width,a=t.height,s=t.depth,t=t.tileName,h=[];if(void 0!==r&&void 0!==o&&void 0!==i&&void 0!==n&&void 0!==a&&void 0!==s)for(var l=0;l<s;l++)for(var u=0;u<a;u++)for(var d=0;d<n;d++){var f=r+d,c=o+u,m=i+l;!(f>=this.width||c>=this.height||m>=this.depth)&&(m=m*this.width*this.height+c*this.width+f,void 0!==this.data[m])?h.push(this.data[m]):h.push(void 0)}return void 0!==t&&(e=this.getTileIdByName(t),h=h.filter(function(t){return t===e})),h}},{key:"findTilesById",value:function(t){for(var e=[],r=this.is3D?this.data.length:1,o=0;o<r;o++)for(var i,n,a=this.is3D?this.data[o]:this.data,s=0;s<a.length;s++)a[s]===t&&(i=s%this.width,n=Math.floor(s/this.width),e.push(this.is3D?{x:i,y:n,z:o}:{x:i,y:n}));return e}},{key:"getTileIdByName",value:function(t){return 1}}])&&h(t.prototype,e),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),d}();function f(t,e){return new Array(t*e).fill(0)}},{"./util/generateTiledJSON.js":25,"./util/mersenne.js":26,"./util/noise.js":27}],6:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==i(t)?t:String(t)}(o.key),o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=function(){function o(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).tiles,t=void 0===t?[]:t,e=this,r=o;if(!(e instanceof r))throw new TypeError("Cannot call a class as a function");this.tiles=t}var t,e,r;return t=o,(e=[{key:"addTile",value:function(t){this.tiles.push(t)}},{key:"getTile",value:function(e){return this.tiles.find(function(t){return t.id===e})}},{key:"getTileByName",value:function(e){return this.tiles.find(function(t){return t.name===e})}}])&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}()},{}],7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=_(t("./Tile.js")),i=_(t("./TileMap.js")),n=_(t("./TileSet.js")),a=_(t("./Biome.js")),s=_(t("./mazes/AldousBroder.js")),h=_(t("./mazes/AldousBroder3D.js")),l=_(t("./mazes/BinaryTree.js")),u=_(t("./mazes/CellularAutomata.js")),d=_(t("./mazes/EllersAlgorithm.js")),f=_(t("./mazes/GrowingTree.js")),c=_(t("./mazes/RecursiveBacktrack.js")),m=_(t("./mazes/RecursiveDivision.js")),y=_(t("./mazes/ThomasHunter.js")),v=_(t("./mazes/BeattieSchoberth.js")),g=_(t("./mazes/Metroidvania.js")),p=_(t("./shapes/Circle.js")),w=_(t("./shapes/Square.js")),b=_(t("./shapes/Triangle.js")),x=_(t("./LSystem.js")),M=_(t("./terrains/FaultLine.js")),j=_(t("./terrains/PerlinNoise.js")),t=_(t("./util/noise.js"));function _(t){return t&&t.__esModule?t:{default:t}}var S={mazes:{}};S.mazes.AldousBroder=s.default,S.mazes.AldousBroder3D=h.default,S.mazes.BinaryTree=l.default,S.mazes.CellularAutomata=u.default,S.mazes.EllersAlgorithm=d.default,S.mazes.GrowingTree=f.default,S.mazes.RecursiveBacktrack=c.default,S.mazes.RecursiveDivision=m.default,S.mazes.BeattieSchoberth=v.default,S.mazes.ThomasHunter=y.default,S.mazes.Metroidvania=g.default,S.mazes.PlatformZones=g.default,S.shapes={},S.shapes.Circle=p.default,S.shapes.Square=w.default,S.shapes.Triangle=b.default,S.terrains={},S.terrains.FaultLine=M.default,S.terrains.PerlinNoise=j.default,S.utils={},S.utils.noise=t.default,S.Biome=a.default,S.LSystem=x.default,S.Tile=o.default,S.TileMap=i.default,S.TileSet=n.default,r.default=S},{"./Biome.js":2,"./LSystem.js":3,"./Tile.js":4,"./TileMap.js":5,"./TileSet.js":6,"./mazes/AldousBroder.js":8,"./mazes/AldousBroder3D.js":9,"./mazes/BeattieSchoberth.js":10,"./mazes/BinaryTree.js":11,"./mazes/CellularAutomata.js":12,"./mazes/EllersAlgorithm.js":13,"./mazes/GrowingTree.js":14,"./mazes/Metroidvania.js":15,"./mazes/RecursiveBacktrack.js":16,"./mazes/RecursiveDivision.js":17,"./mazes/ThomasHunter.js":18,"./shapes/Circle.js":19,"./shapes/Square.js":20,"./shapes/Triangle.js":21,"./terrains/FaultLine.js":22,"./terrains/PerlinNoise.js":23,"./util/noise.js":27}],8:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){t.fill(1);var r=0,o=t.width*t.height/4,i=2*Math.floor(t.random()*Math.floor(t.width/2)),n=2*Math.floor(t.random()*Math.floor(t.height/2));t.data[n*t.width+i]=0,r++;for(;r<o;){var a=[[2,0],[-2,0],[0,2],[0,-2]],a=a[Math.floor(t.random()*a.length)],s=i+a[0],h=n+a[1];0<=s&&s<t.width&&0<=h&&h<t.height&&(1===t.data[h*t.width+s]&&(t.data[(n+a[1]/2)*t.width+(i+a[0]/2)]=0,t.data[h*t.width+s]=0,r++),i=s,n=h)}}},{}],9:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){t.fill(1);var r=0,o=t.width*t.height*t.depth/8,i=2*Math.floor(Math.random()*Math.floor(t.width/2)),n=2*Math.floor(Math.random()*Math.floor(t.height/2)),a=2*Math.floor(Math.random()*Math.floor(t.depth/2));t.data[a][n*t.width+i]=0,r++;for(;r<o;){var s=[[2,0,0],[-2,0,0],[0,2,0],[0,-2,0],[0,0,2],[0,0,-2]],s=s[Math.floor(Math.random()*s.length)],h=i+s[0],l=n+s[1],u=a+s[2];0<=h&&h<t.width&&0<=l&&l<t.height&&0<=u&&u<t.depth&&(1===t.data[u][l*t.width+h]&&(t.data[a+s[2]/2][(n+s[1]/2)*t.width+(i+s[0]/2)]=0,t.data[u][l*t.width+h]=0,r++),i=h,n=l,a=u)}}},{}],10:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var r,o,i,n,a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(a)return o=!(r=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){o=!0,i=t},f:function(){try{r||null==a.return||a.return()}finally{if(o)throw i}}};if(Array.isArray(t)||(a=function(t,e){var r;if(t)return"string"==typeof t?h(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return a&&(t=a),n=0,{s:e=function(){},n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==i(t)?t:String(t)}(o.key),o)}}function a(t,e,r){e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1})}Object.defineProperty(r,"__esModule",{value:!0}),r.BeattieSchoberthBuilder=r.BeattieSchoberth=void 0,r.default=function(t,e){var r=Math.floor(Math.sqrt(Math.max(t.width,t.height))),e=new g({rooms:2*r,keys:3,special:2,width:t.width,height:t.height,roomHeight:e.roomHeight||r,roomWidth:e.roomWidth||r}).build(function(){return t.random()}),o=e.world.reduce(function(t,e){return t.concat(e)},[]);e.world=null;for(var i=0;i<t.data.length;i++)t.data[i]=o[i];t.world=e};function l(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").split("\n").map(function(t){return t.split("")})}var v=["n","e","s","w"],u=r.BeattieSchoberth=function(){function r(t){var e=t.rooms,t=t.keys;o(this,r),this.maxRooms=e,this.maxKeys=t,this.maxRooms<2&&(console.error("Room count ".concat(this.maxRooms," needs to be at least two (entrance and exit).")),this.maxRooms=2),this.maxKeys>this.maxRooms-2&&(console.error("Key count ".concat(this.maxKeys," is greater than rooms ").concat(this.maxRooms," minus two (entrance and exit). Reducing keys by two.")),this.maxKeys=this.maxRooms-2),this.build=this.generate,this.reset()}return a(r,[{key:"render",value:function(){for(var t="[1;37m",e={0:"[1;31m",1:"[1;32m",2:"[1;34m",3:"[1;33m",4:"[1;35m",5:"[1;36m"},r=(1<arguments.length?arguments[1]:void 0)||this.generate(),o=r.grid,i="",n=0;n<r.size.height;n++){for(var a="",s="",h=0;h<r.size.width;h++){var l,u=o[n][h],d=r.rooms[u];d?(l=e[d.keyInRoom]||t,a+=(l=d.entrance||d.exit?"[7m":l)+String(u).padStart(3,"0")+"[0m",null!==d.doors.e?a+=(e[r.doors[d.doors.e].key]||t)+"-[0m":a+=" ",null!==d.doors.s?s+=(e[r.doors[d.doors.s].key]||t)+"  | [0m":s+="    "):(a+="    ",s+="    ")}i=i+(a+"\n")+(s+"\n")}return i}},{key:"reset",value:function(){this.rooms=[],this.doors=[],this.keys=[],this.entrance=0,this.exit=null,this.seed={x:Math.floor(100.5),y:Math.floor(100.5)},this.bounds={n:this.seed.y,e:this.seed.x,s:this.seed.y,w:this.seed.x},this.furthest={n:new Map,e:new Map,s:new Map,w:new Map},this.lockPool=new Map,this.maxDistance=0}},{key:"generate",value:function(t){this.random=t||function(){return Math.random()},this.reset(),this.addRoom(this.seed.x,this.seed.y);for(var e=0;e<this.maxRooms-1;e++){var r,o,i=v[Math.floor(t()*v.length)],n=void 0,a=void 0,s=void 0,i=("n"===i?(n=Math.floor(t()*(this.bounds.e-this.bounds.w))+this.bounds.w,r=this.furthest.n.get(n),a=(s=this.rooms[r]).y-1):"e"===i?(a=Math.floor(t()*(this.bounds.s-this.bounds.n))+this.bounds.n,r=this.furthest.e.get(a),n=(s=this.rooms[r]).x+1):"s"===i?(n=Math.floor(t()*(this.bounds.e-this.bounds.w))+this.bounds.w,o=this.furthest.s.get(n),a=(s=this.rooms[o]).y+1):"w"===i&&(a=Math.floor(t()*(this.bounds.s-this.bounds.n))+this.bounds.n,o=this.furthest.w.get(a),n=(s=this.rooms[o]).x-1),this.addRoom(n,a));this.addDoor(s.id,i)}var h=this.rooms.length/(this.maxKeys+1),l=this.getHighestDistanceRoom().id;this.setExit(l);for(var u=0;u<this.maxKeys;u++){var d=this.findRoomParentWithAtMostChildren(this.rooms[l],h);if(!d){console.error("exhausted possible lockable rooms! giving up.");break}this.removeRoomAndChildrenFromLockPool(d),this.decrementChildrenCountAllParents(d);var f=this.getHighestDistanceRoom();if(!f){console.error("Cannot find a room to put a key in! Cancelling lock. Level should still be beatable.");break}this.lock(d.id-1,f.id),l=f.id}var c=this.squish(),m=c.width,c=c.height,y=this.generateGrid(m,c);return this.classifyRooms(),{size:{width:m,height:c},terminals:{entrance:this.entrance,exit:this.exit,deadends:this.deadends},rooms:this.rooms.map(function(t){return delete t.children,delete t.childrenCount,delete t.parent,t}),doors:this.doors.map(function(t){return t.rooms=t.rooms.map(function(t){return t.id}),t}),keys:this.keys,grid:y}}},{key:"squish",value:function(){var t,e=this.bounds.e-this.bounds.w+1,r=this.bounds.s-this.bounds.n+1,o=this.bounds.w,i=this.bounds.n,n=s(this.rooms);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.x-=o,a.y-=i}}catch(t){n.e(t)}finally{n.f()}return{width:e,height:r}}},{key:"addRoom",value:function(t,e){var r=this.rooms.length,t=(this.stretch(t,e),this.further(t,e,r),{id:r,x:t,y:e,children:new Set,childrenCount:0,parent:null,keyInRoom:null,template:"F1",distance:0===r?0:null,exit:!1,entrance:0===r,doors:{n:null,e:null,s:null,w:null}});return this.rooms.push(t),r}},{key:"further",value:function(t,e,r){var o=this.furthest.n.get(t),o=((void 0===o||this.rooms[o].y>e)&&this.furthest.n.set(t,r),this.furthest.e.get(e)),o=((void 0===o||this.rooms[o].x<t)&&this.furthest.e.set(e,r),this.furthest.s.get(t)),o=((void 0===o||this.rooms[o].y<e)&&this.furthest.s.set(t,r),this.furthest.w.get(e));(void 0===o||this.rooms[o].x>t)&&this.furthest.w.set(e,r)}},{key:"stretch",value:function(t,e){e<this.bounds.n&&(this.bounds.n=e),t>this.bounds.e&&(this.bounds.e=t),e>this.bounds.s&&(this.bounds.s=e),t<this.bounds.w&&(this.bounds.w=t)}},{key:"classifyRooms",value:function(){this.deadends=[];var t,e=s(this.rooms);try{for(e.s();!(t=e.n()).done;){var r=t.value,o=0;null!==r.doors.n&&o++,null!==r.doors.e&&o++,null!==r.doors.s&&o++,null!==r.doors.w&&o++,1===o?(this.deadends.push(r.id),null!==r.doors.n?r.template="D1":null!==r.doors.e?r.template="D2":null!==r.doors.s?r.template="D3":null!==r.doors.w&&(r.template="D4")):2===o?null!==r.doors.n&&null!==r.doors.s?r.template="C1":null!==r.doors.e&&null!==r.doors.w?r.template="C2":null!==r.doors.n&&null!==r.doors.e?r.template="B1":null!==r.doors.e&&null!==r.doors.s?r.template="B2":null!==r.doors.s&&null!==r.doors.w?r.template="B3":null!==r.doors.w&&null!==r.doors.n&&(r.template="B4"):3===o?null===r.doors.s?r.template="E1":null===r.doors.w?r.template="E2":null===r.doors.n?r.template="E3":null===r.doors.e&&(r.template="E4"):r.template=4===o?"A1":"F1"}}catch(t){e.e(t)}finally{e.f()}}},{key:"addDoor",value:function(t,e){var t=this.rooms[t],e=this.rooms[e],r=this.doors.length,o=null;if(t.x===e.x&&t.y===e.y-1)o="v",t.doors.s=r,e.doors.n=r;else if(t.x===e.x+1&&t.y===e.y)o="h",t.doors.w=r,e.doors.e=r;else if(t.x===e.x&&t.y===e.y+1)o="v",t.doors.n=r,e.doors.s=r;else{if(t.x!==e.x-1||t.y!==e.y)throw new Error("Rooms must be adjacent");o="h",t.doors.e=r,e.doors.w=r}return t.children.add(e),e.distance=t.distance+1,e.parent=t,this.increaseChildrenCountAllParents(e),this.registerRoomDistanceLockPool(e.id),this.doors.push({id:r,key:null,orientation:o,exit:!1,rooms:[t,e]}),r}},{key:"increaseChildrenCountAllParents",value:function(t){for(;t=t.parent;)t.childrenCount++}},{key:"registerRoomDistanceLockPool",value:function(t){var t=this.rooms[t],e=t.distance;this.lockPool.get(e)||this.lockPool.set(e,new Set),this.lockPool.get(e).add(t),e>this.maxDistance&&(this.maxDistance=e)}},{key:"removeFromLockPool",value:function(t){var e=t.distance,r=this.lockPool.get(e);r?r.delete(t):console.error("no pool of depth ".concat(e))}},{key:"getHighestDistanceRoom",value:function(){for(var t=this.maxDistance;0<t;t--){var e=this.lockPool.get(t);if(e.size)return e.values().next().value}return null}},{key:"findRoomParentWithAtMostChildren",value:function(t,e){if(!t)throw new Error("bad room");for(var r;r=t.parent;){if(r.childrenCount+1>e)return t;t=r}return t}},{key:"decrementChildrenCountAllParents",value:function(t){for(var e=t.childrenCount+1;t;)t.childrenCount-=e,t=t.parent}},{key:"removeRoomAndChildrenFromLockPool",value:function(t){this.removeFromLockPool(t);var e,r=s(t.children);try{for(r.s();!(e=r.n()).done;){var o=e.value;this.removeFromLockPool(o),this.removeRoomAndChildrenFromLockPool(o)}}catch(t){r.e(t)}finally{r.f()}}},{key:"lock",value:function(t,e){var r=this.doors[t],o=this.rooms[e],i=this.keys.length;if(!r)throw new Error("Invalid door ".concat(t));if(o)return this.keys.push({id:i,location:o.id,door:t}),this.doors[t].key=i,o.keyInRoom=i;throw new Error("Invalid room ".concat(e))}},{key:"generateGrid",value:function(t,e){for(var i=[],r=0;r<e;r++){for(var o=[],n=0;n<t;n++)o.push(null);i.push(o)}var a=this;return function t(e){var r,e=a.rooms[e],o=(i[e.y][e.x]=e.id,s(e.children));try{for(o.s();!(r=o.n()).done;)t(r.value.id)}catch(t){o.e(t)}finally{o.f()}}(0),i}},{key:"setExit",value:function(t){var e=this.rooms[t];if(!e)throw new Error("invalid room id ".concat(t));e.exit=!0,null!==e.doors.n&&(this.doors[e.doors.n].exit=!0),null!==e.doors.e&&(this.doors[e.doors.e].exit=!0),null!==e.doors.s&&(this.doors[e.doors.s].exit=!0),null!==e.doors.w&&(this.doors[e.doors.w].exit=!0),this.exit=t}}]),r}(),m=0,d=1,f=2,c=3,y=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";o(this,e),this.grid=l(t)}return a(e,[{key:"overlay",value:function(t,e,r){for(var o=Array.isArray(t)?t:l(t),i=0;i<o.length;i++)for(var n=0;n<o[i].length;n++)this.grid[r+i]||(this.grid[r+i]=[]),this.grid[r+i][e+n]=o[i][n]}},{key:"fill",value:function(t,e,r){for(var o=0;o<r;o++){this.grid[o]=[];for(var i=0;i<e;i++)this.grid[o][i]=t}}},{key:"toString",value:function(){return this.grid.map(function(t){return t.join("")}).join("\n")}}]),e}(),g=r.BeattieSchoberthBuilder=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.adventure=new u(t),this.options=t,this.max_height=t.maxHeight,this.max_width=t.maxWidth}return a(e,[{key:"renderWorld",value:function(){function t(t){return r[t]||e.options[t]}var e=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t("width"),i=t("height"),n=t("roomWidth"),a=t("roomHeight"),s=(1<arguments.length?arguments[1]:void 0)||this.build(),h=s.grid,l=new y,u=null;l.fill(m,o,i);for(var d=0;d<s.size.height;d++)for(var f=0;f<s.size.width;f++){var c=h[d][f],c=s.rooms[c],u=c?this.buildRoom({doors:c.doors}):this.emptyRoom({});l.overlay(u,f*n,d*a)}return l.grid}},{key:"buildRoom",value:function(){for(var e=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=function(t,e,r){var o=Math.floor(e/2),e=!!(e%2),i=Math.floor(r/2);return e?!(t!==o||!r)||(t<o?o-i<t:t<o+i):t<=o?o-i<=t:t<o+i},o=function(t){return r[t]||e.options[t]},i=o("roomWidth"),n=o("roomHeight"),a=[],s=0;s<n;s++){for(var h=[],l=0;l<i;l++)0===l||l===i-1?0===l?r.doors.w&&t(s,n,2)?h.push(c):h.push(d):r.doors.e&&t(s,n,2)?h.push(c):h.push(d):0===s||s===n-1?0===s?r.doors.n&&t(l,i,2)?h.push(c):h.push(d):r.doors.s&&t(l,i,2)?h.push(c):h.push(d):h.push(f);a.push(h)}return a}},{key:"emptyRoom",value:function(){for(var e=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=function(t){return r[t]||e.options[t]},o=t("roomWidth"),i=t("roomHeight"),n=[],a=0;a<i;a++){for(var s=[],h=0;h<o;h++)s.push(m);n.push(s)}return n}},{key:"build",value:function(t){t=this.adventure.build(t);return t.world=this.renderWorld({},t),t}}]),e}()},{}],11:[function(t,e,r){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){t.fill(1);for(var r=0;r<t.height;r+=2)for(var o=0;o<t.width;o+=2){t.data[r*t.width+o]=0;var i,n=[];o+2<t.width&&n.push([2,0]),r+2<t.height&&n.push([0,2]),0<n.length&&(i=Math.floor(t.random()*n.length),n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var o,i,n,a,s=[],h=!0,l=!1;try{if(n=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;h=!1}else for(;!(h=(o=n.call(r)).done)&&(s.push(o.value),s.length!==e);h=!0);}catch(t){l=!0,i=t}finally{try{if(!h&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?a(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n[i],2),i=n[0],n=n[1],t.data[(r+n)*t.width+(o+i)]=0,t.data[(r+n/2)*t.width+(o+i/2)]=0)}}},{}],12:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){for(var r=e.wallChance||.45,o=e.iterations||4,i=e.neighborThreshold||4,n=0;n<t.height;n++)for(var a=0;a<t.width;a++)t.data[n*t.width+a]=t.random()<r?0:1;for(var s=0;s<o;s++){for(var h=new Array(t.width*t.height).fill(1),l=0;l<t.height;l++)for(var u=0;u<t.width;u++){for(var d=0,f=-1;f<=1;f++)for(var c,m,y=-1;y<=1;y++)0===y&&0===f||(m=l+f,0<=(c=u+y)&&c<t.width&&0<=m&&m<t.height?d+=0===t.data[m*t.width+c]?1:0:d++);h[l*t.width+u]=i<=d?0:1}t.data=h}}},{}],13:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){t.data.fill(0);var n={};function a(t,e){var r="".concat(t,",").concat(e);return n[r]||(r=e,e="".concat(e=t,",").concat(r),n[e]={id:e,cells:[e]},n[e])}function r(t,e,r,o){var i=a(t,e),t=a(r,o);i.id!==t.id&&t.cells.forEach(function(t){i.cells.push(t),n[t]=i})}for(var o=0;o<t.height;o+=2){for(var i=0;i<t.width-2;i+=2).5<t.random()&&(r(i,o,i+2,o),t.data[o*t.width+i+1]=1);if(o<t.height-2)for(var s={},h=0;h<t.width;h+=2){var l=a(h,o).id;!s[l]&&.5<t.random()&&(r(h,o,h,o+2),t.data[(o+1)*t.width+h]=1,s[l]=!0)}}for(var u=0;u<t.width-2;u+=2)a(u,t.height-1).id!==a(u+2,t.height-1).id&&(r(u,t.height-1,u+2,t.height-1),t.data[(t.height-1)*t.width+u+1]=1)}},{}],14:[function(t,e,r){"use strict";function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var o,i,n,a,s=[],h=!0,l=!1;try{if(n=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;h=!1}else for(;!(h=(o=n.call(r)).done)&&(s.push(o.value),s.length!==e);h=!0);}catch(t){l=!0,i=t}finally{try{if(!h&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?o(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(l,t){var u=1;l.data.fill(0);function e(){var t,e,r,o,i,n=f(d[d.length-1],2),a=n[0],s=n[1],h=[];[[0,-2],[0,2],[2,0],[-2,0]].forEach(function(t){var t=f(t,2),e=t[0],t=t[1],e=a+e,t=s+t;0<=e&&e<l.width&&0<=t&&t<l.height&&0===l.data[t*l.width+e]&&h.push([e,t])}),0<h.length?(n=Math.floor(l.random()*h.length),t=(n=f(h[n],2))[0],n=n[1],e=a,r=s,o=t,i=n,l.data[r*l.width+e]=u,l.data[Math.floor((r+i)/2)*l.width+Math.floor((e+o)/2)]=u,l.data[i*l.width+o]=u,d.push([t,n])):d.pop()}var r=Math.floor(l.random()*l.width),o=Math.floor(l.random()*l.height),d=[[r,o]];for(;0<d.length;)e()}},{}],15:[function(t,e,r){"use strict";function B(t,e){var r,o,i,n,a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(a)return o=!(r=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){o=!0,i=t},f:function(){try{r||null==a.return||a.return()}finally{if(o)throw i}}};if(Array.isArray(t)||(a=function(t,e){var r;if(t)return"string"==typeof t?s(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return a&&(t=a),n=0,{s:e=function(){},n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==i(t)?t:String(t)}(o.key),o)}}function a(t,e,r){e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){t.fill(0);var r=Math.max(t.width,t.height);if(!(r<=5)){var o=Math.sqrt(r),o=(o%2!=1&&o++,r<10?Math.floor(r/2):10),r=r<10?1:2,i=Math.floor(t.width/o),o=Math.floor(t.height/o),n=Math.floor(t.width/i),a=Math.floor(t.height/o),a=Math.floor(n*a*.8),s=Math.floor(a/4),o=new v({roomWidth:o,roomHeight:i,maxFails:25e3,width:n,height:n,gridHeight:t.height,gridWidth:t.width,minZonesPerRoom:1,maxZonesPerRoom:3,minRoomsPerMap:s,maxRoomsPerMap:a,newDoors:r,roomDiff:r,roomDiffOdds:.5}).build(function(){return t.random()}),h=o.world.reduce(function(t,e){return t.concat(e)},[]);o.world=null,t.world=o;for(var l=0;l<t.data.length;l++)t.data[l]=h[l]}};function h(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").split("\n").map(function(t){return t.split("")})}function l(t,e,r){var o=Math.floor(e/2),e=!!(e%2),i=Math.floor(r/2);return e?!(t!==o||!r)||(t<o?o-i<t:t<o+i):t<=o?o-i<=t:t<o+i}var N="wall",F="door",W="open",H=["n","e","s","w"],u=0,d=1,f=2,c=3,m=6,y=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";o(this,e),this.grid=h(t)}return a(e,[{key:"overlay",value:function(t,e,r){for(var o=Array.isArray(t)?t:h(t),i=0;i<o.length;i++)for(var n=0;n<o[i].length;n++)this.grid[r+i]||(this.grid[r+i]=[]),this.grid[r+i][e+n]=o[i][n]}},{key:"fill",value:function(t,e,r){for(var o=0;o<r;o++){this.grid[o]=[];for(var i=0;i<e;i++)this.grid[o][i]=t}}},{key:"toString",value:function(t){return(t||this.grid).map(function(t){return t.join("")}).join("\n")}}]),e}(),v=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.options=t}return a(e,[{key:"render",value:function(){for(var t=((1<arguments.length?arguments[1]:void 0)||this.build()).map,e="",r=0;r<t.length;r++){for(var o="",i=0;i<t[r].length;i++)t[r][i].edges.e||t[r][i].edges.w||t[r][i].edges.n||t[r][i].edges.s?o+="#":o+=" ";e+=o+"\n"}return e}},{key:"build",value:function(t){this.random=t;var e=p(this.options,t),r=new y;this.options.roomWidth,this.options.roomHeight;r.fill(u,this.options.gridWidth,this.options.gridHeight);for(var o=0;o<e.rooms.length;o++)for(var i=0;i<e.rooms[o].length;i++){var n=e.rooms[o][i],a=e.map[n.y][n.x],a=g(a,this.options.roomHeight,this.options.roomWidth);r.overlay(a,n.x*this.options.roomHeight,n.y*this.options.roomWidth)}return e.world=r.grid,e}}]),e}(),g=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0,r=2<arguments.length?arguments[2]:void 0,o=[],i=0;i<r;i++){for(var n=[],a=0;a<e;a++)0===a||a===e-1?0===a?"open"===t.edges.w?n.push(0===i||i===r-1?d:f):"door"!==t.edges.w&&"exit"!==t.edges.w||!l(i,r,2)?n.push(d):"door"===t.edges.w?n.push(c):n.push(m):"open"===t.edges.e?n.push(0===i||i===r-1?d:f):"door"!==t.edges.e&&"exit"!==t.edges.e||!l(i,r,2)?n.push(d):"door"===t.edges.e?n.push(c):n.push(m):0===i||i===r-1?0===i?"open"===t.edges.n?n.push(f):"door"!==t.edges.n&&"exit"!==t.edges.n||!l(a,e,2)?n.push(d):"door"===t.edges.n?n.push(c):n.push(m):"open"===t.edges.s?n.push(f):"door"!==t.edges.s&&"exit"!==t.edges.s||!l(a,e,2)?n.push(d):"door"===t.edges.s?n.push(c):n.push(m):n.push(f);o.push(n)}return o},p=function(){for(var _=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},S=1<arguments.length?arguments[1]:void 0,k=_.width||20,P=_.height||20,A=_.minZonesPerRoom||1,O=_.maxZonesPerRoom||4,T=_.minRoomsPerMap||10,R=_.maxRoomsPerMap||20,D=_.newDoors||3,z=_.roomDiff||3,E=_.roomDiffOdds||.2,C=0,t=null;!t;)t=function(t){for(var e=L(T,R,S),r={x:Math.floor(k/2),y:Math.floor(k/2)},o={n:{x:r.x,y:r.y},s:{x:r.x,y:r.y},e:{x:r.x,y:r.y},w:{x:r.x,y:r.y}},i=0,n=[],a=0;a<e;a++){for(var s=L(A,O,S),h=[],l=0;l<s;l++){if(!r)return null;var u=t[r.y][r.x];if(h.push({x:r.x,y:r.y}),u.open=!0,u.room=a,u.zone=i,i++,r.x<=o.w.x&&(o.w=r),r.x>=o.e.x&&(o.e=r),r.y<=o.n.y&&(o.n=r),r.y>=o.s.y&&(o.s=r),!(r=I(t,r,S))){if(C++,_.maxFails&&C>_.maxFails)throw new Error("Failed too many times to generate this configuration");return!1}}for(var d=0,f=h;d<f.length;d++)!function(t,e){var r=t[e.y][e.x].room;t[e.y][e.x].edges.n!=F&&(0!==e.y&&t[e.y-1][e.x].open&&t[e.y-1][e.x].room==r?t[e.y][e.x].edges.n=W:t[e.y][e.x].edges.n=N);t[e.y][e.x].edges.e!=F&&(e.x>=k-1||!t[e.y][e.x+1].open||t[e.y][e.x+1].room!=r?t[e.y][e.x].edges.e=N:t[e.y][e.x].edges.e=W);t[e.y][e.x].edges.s!=F&&(e.y>=P-1||!t[e.y+1][e.x].open||t[e.y+1][e.x].room!=r?t[e.y][e.x].edges.s=N:t[e.y][e.x].edges.s=W);t[e.y][e.x].edges.w!=F&&(0!==e.x&&t[e.y][e.x-1].open&&t[e.y][e.x-1].room==r?t[e.y][e.x].edges.w=W:t[e.y][e.x].edges.w=N)}(t,f[d]);n[a]=h,a!=e-1&&(r=function(t,e,r){var o,i=B(e=U(e,r));try{for(i.s();!(o=i.n()).done;){var n=o.value,a=I(t,n,r);if(a)return q(t,n,a),a}}catch(t){i.e(t)}finally{i.f()}return!1}(t,h,S))}for(var c=0,m=0,y=n;m<y.length;m++){var v,g=B(y[m]);try{for(g.s();!(v=g.n()).done;){var p,w,b=v.value;0===b.x||0===b.y||b.x>=k-1||b.y>=P-1||(p=t[b.y][b.x].room,w=null,(w=t[b.y+1][b.x]).open&&Math.abs(w.room-p)>z&&Math.random()<=E&&(q(t,b,{x:b.x,y:b.y+1}),c++),(w=t[b.y-1][b.x]).open&&Math.abs(w.room-p)>z&&Math.random()<=E&&(q(t,b,{x:b.x,y:b.y-1}),c++),(w=t[b.y][b.x-1]).open&&Math.abs(w.room-p)>z&&Math.random()<=E&&(q(t,b,{x:b.x-1,y:b.y}),c++),(w=t[b.y][b.x+1]).open&&Math.abs(w.room-p)>z&&Math.random()<=E&&(q(t,b,{x:b.x+1,y:b.y}),c++))}}catch(t){g.e(t)}finally{g.f()}}if(c<D){if(C++,_.maxFails&&C>_.maxFails)throw new Error("Failed too many times to generate this configuration");return!1}for(var x=0,M=H;x<M.length;x++){var j=M[x];t[o[j].y][o[j].x].edges[j]="exit",t[o[j].y][o[j].x].exit=!0}return{map:t,exits:o,failCount:C,rooms:n}}(function(t,e){for(var r=[],o=0;o<e;o++){r[o]=[];for(var i=0;i<t;i++)r[o][i]={open:!1,room:null,exit:null,zone:null,edges:{n:null,e:null,s:null,w:null}}}return r}(k,P));return t;function I(t,e,r){for(var o,i=U([{d:"n",x:0,y:1},{d:"e",x:1,y:0},{d:"s",x:0,y:-1},{d:"w",x:-1,y:0}],r);o=i.pop();){if((o={x:e.x+o.x,y:e.y+o.y}).x<0||o.y<0||k<=o.x||P<=o.y){if(C++,_.maxFails&&C>_.maxFails)throw new Error("Failed too many times to generate this configuration");return null}if(!t[o.y][o.x].open)return o}return!1}};function L(t,e,r){return Math.floor(r()*(e+1-t)+t)}function q(t,e,r){var o=t[e.y][e.x],t=t[r.y][r.x];e.x==r.x&&e.y>r.y?(o.edges.n=F,t.edges.s=F):e.x==r.x&&e.y<r.y?(o.edges.s=F,t.edges.n=F):e.y==r.y&&e.x>r.x?(o.edges.w=F,t.edges.e=F):e.y==r.y&&e.x<r.x?(o.edges.e=F,t.edges.w=F):console.log("BUILD DOOR FAILURE",o,t)}function U(t,e){var r,o,i,n=t.slice(),a=n.length;if(0==a)return!1;for(;--a;)r=Math.floor(e()*(a+1)),o=n[a],i=n[r],n[a]=i,n[r]=o;return n}},{}],16:[function(t,e,r){"use strict";function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var o,i,n,a,s=[],h=!0,l=!1;try{if(n=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;h=!1}else for(;!(h=(o=n.call(r)).done)&&(s.push(o.value),s.length!==e);h=!0);}catch(t){l=!0,i=t}finally{try{if(!h&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?o(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(a,t){function s(t,e){var r=[];return 0<t&&!u[e][t-1]&&r.push([t-1,e]),0<e&&!u[e-1][t]&&r.push([t,e-1]),t<a.width-1&&!u[e][t+1]&&r.push([t+1,e]),e<a.height-1&&!u[e+1][t]&&r.push([t,e+1]),r}function h(t,e,r,o){e=e*a.width+t,t=o*a.width+r,a.data[Math.min(e,t)]=0}var l=[],u=Array.from({length:a.height},function(){return Array(a.width).fill(!1)}),e=Math.floor(a.random(a.width)),r=Math.floor(a.random(a.height));!function(t,e){for(u[e][t]=!0,l.push([t,e]);0<l.length;){var r,o=d(l[l.length-1],2),i=o[0],o=o[1],n=s(i,o);0<n.length?(r=(n=d(n[Math.floor(a.random(n.length))],2))[0],n=n[1],h(i,o,r,n),u[n][r]=!0,l.push([r,n])):l.pop()}}(e,r)}},{}],17:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(f,t){f.data.fill(1),function t(e,r,o,i){if(!(o-e<2||i-r<2)){for(var n=o-e<i-r,a=n?e:Math.floor(f.random(o-e-2))+e+1,s=n?Math.floor(f.random(i-r-2))+r+1:r,h=n?Math.floor(f.random(o-e))+e:a,l=n?s:Math.floor(f.random(i-r))+r,u=e;u<o;u++)for(var d=r;d<i;d++)(n&&u===a&&d!==l||!n&&d===s&&u!==h)&&(f.data[d*f.width+u]=0);n?(t(e,r,o,s),t(e,s,o,i)):(t(e,r,a,i),t(a,r,o,i))}}(0,0,f.width,f.height)}},{}],18:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==i(t)?t:String(t)}(o.key),o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){t.fill(1);var r=Math.max(t.width,t.height);if(!(r<=5)){var r=Math.floor(Math.sqrt(Math.max(t.width,t.height))),o=(r%2!=1&&r++,Math.floor(t.width/r*t.width/r/2)),i=Math.ceil(r/2),o=new b({width:t.width,height:t.height,retry:100,special:!0,room:{ideal:e.roomCount||o,min_width:e.roomMinWidth||r-i,max_width:e.roomMaxWidth||r+i,min_height:e.roomMinHeight||r-i,max_height:e.roomMinHeight||r+i}}).build(function(){return t.random()}),n=o.world.reduce(function(t,e){return t.concat(e)},[]);o.world=null,t.world=o;for(var a=0;a<t.data.length;a++)t.data[a]=n[a]}};var a=0,s=1,h=2,l=3,u=4,d=5,f=6,c=21,m=21,y=3,v=7,g=3,p=7,w=10,b=function(){function o(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this,r=o;if(!(e instanceof r))throw new TypeError("Cannot call a class as a function");(t=t||{}).room||(t.room={}),this.max_width=t.width||c,this.max_height=t.height||m,this.room_min_width=t.room.min_width||y,this.room_max_width=t.room.max_width||v,this.room_min_height=t.room.min_height||g,this.room_max_height=t.room.max_height||p,this.room_ideal_count=t.room.ideal||w,this.retry_count=t.retry||w,this.want_special=!!t.special}var t,e,r;return t=o,(e=[{key:"render",value:function(){for(var t=((1<arguments.length?arguments[1]:void 0)||this.build()).world,e="",r=0;r<t.length;r++){for(var o="",i=0;i<t[r].length;i++){var n=t[r][i];o+=0===n?" ":1===n?".":2===n?"#":3===n?"/":4===n?"X":5===n?"<":6===n?">":t[r][i]}e+=o+"\n"}return e}},{key:"build",value:function(t){return this.random=t||function(){return Math.random()},this.world=null,this.rooms={},this.doors={},this.walls=[],this.enter=null,this.exit=null,this.special=null,this.deadends=[],this.room_id=0,this.door_id=0,this.createVoid(),this.addStarterRoom(),this.generateRooms(),this.addSpecialRooms(),this.buildWalls(),{width:this.max_width,height:this.max_height,enter:this.enter,exit:this.exit,deadends:this.deadends,special:this.special,door_count:this.door_id,doors:this.doors,room_count:this.room_id,rooms:this.rooms,walls:this.walls,world:this.world}}},{key:"createVoid",value:function(){for(var t=[],e=0;e<this.max_height;e++){t[e]=[];for(var r=0;r<this.max_width;r++)t[e][r]=a}this.world=t}},{key:"addStarterRoom",value:function(){var t=this.getRoomDimensions(),e=this.max_width-(t.width+2)+1,r=this.max_height-(t.height+2)+1,e=this.randomOdd(1,e),r=this.randomOdd(1,r);this.addRoom(e,r,t.width,t.height)}},{key:"getRoomDimensions",value:function(){return{width:this.randomOdd(this.room_min_width,this.room_max_width),height:this.randomOdd(this.room_min_height,this.room_max_height)}}},{key:"addRoom",value:function(t,e,r,o){var i=this.room_id++;this.rooms[i]={left:t,top:e,width:r,height:o,id:i,walls:[],neighbors:[],doors:[]};for(var n=e;n<e+o;n++)for(var a=t;a<t+r;a++)this.world[n][a]=s;return i}},{key:"addFloor",value:function(t,e){this.world[e][t]=s}},{key:"generateRooms",value:function(){for(var t=this.retry_count;this.room_id<this.room_ideal_count&&(this.generateRoom()||!(--t<=0)););}},{key:"generateRoom",value:function(){var t,e,r=this.randomFn(0,3),o=1===r?1:3===r?-1:0,i=0===r?1:2===r?-1:0,n=this.getRoomDimensions();if(0===r?e=this.randomOdd(t=1,this.max_width-n.width-2):1===r?(t=this.randomOdd(1,this.max_height-n.height-2),e=1):2===r?(t=this.max_height-n.height-1,e=this.randomOdd(1,this.max_width-n.width-2)):3===r&&(t=this.randomOdd(1,this.max_height-n.height-2),e=this.max_width-n.width-1),!1!==this.collides(t,e,n.width,n.height))return!1;for(var a=null;!1===(a=this.collides(t+i,e+o,n.width,n.height));)if(this.invalid(t+=i,e+=o,n.width,n.height))return!1;r=this.addRoom(e,t,n.width,n.height);return this.addDoorBetweenRooms(o,i,a,r),!0}},{key:"collides",value:function(t,e,r,o){for(var i=t,n=e,a=r,s=o,h=0;h<this.room_id;h++){var l=this.rooms[h];if(!(n>l.left+l.width||n+a<l.left||i>l.top+l.height||i+s<l.top))return l.id}return!1}},{key:"invalid",value:function(t,e,r,o){return t<=1||e<=1||t+o>=this.max_height-1||e+r>=this.max_width-1}},{key:"buildWalls",value:function(){for(var t=this.rooms,e=0;e<this.room_id;e++){for(var r=t[e],o=r.left-1;o<r.left+r.width+1;o++)this.addWall(o,r.top-1,r);for(var i=r.top;i<r.top+r.height;i++)this.addWall(r.left+r.width,i,r);for(var n=r.left-1;n<r.left+r.width+1;n++)this.addWall(n,r.top+r.height,r);for(var a=r.top;a<r.top+r.height;a++)this.addWall(r.left-1,a,r)}}},{key:"addWall",value:function(t,e,r){this.world[e][t]===a&&(this.world[e][t]=h,this.walls.push([t,e])),this.world[e][t]!==a&&this.world[e][t]!==h||r.walls.push([t,e])}},{key:"addDoorBetweenRooms",value:function(t,e,r,o){var i,n,a,s=this.rooms[r],h=this.rooms[o];1===t?(i=s.left-1,n=this.randomFn(Math.max(s.top,h.top)+1,Math.min(s.top+s.height,h.top+h.height)-2),a="h"):-1===t?(i=h.left-1,n=this.randomFn(Math.max(h.top,s.top)+1,Math.min(h.top+h.height,s.top+s.height)-2),a="h"):-1===e?(i=this.randomFn(Math.max(s.left,h.left)+1,Math.min(s.left+s.width,h.left+h.width)-2),n=h.top-1,a="v"):1===e&&(i=this.randomFn(Math.max(h.left,s.left)+1,Math.min(h.left+h.width,s.left+s.width)-2),n=s.top-1,a="v"),this.addDoor(i,n,r,o,a),this.rooms[r].neighbors.push(o),this.rooms[o].neighbors.push(r)}},{key:"addSpecialRooms",value:function(){for(var t,e=[],r={id:null,area:1/0},o=0;o<this.room_id;o++)1===(t=this.rooms[o]).neighbors.length&&(this.rooms[o].deadend=!0,e.push(o),t.width*t.height<r.area)&&(r.id=o);this.want_special&&2<=e.length&&(i=e.indexOf(r.id),e.splice(i,1),i=this.rooms[r.id].doors[0],this.special={room_id:n=r.id,door_id:i},(i=this.doors[i]).special=!0,this.rooms[n].special=!0,this.world[i.y][i.x]=u),this.shuffle(e);var i,n=e.pop();void 0!==n&&(i=this.randomNonEdgeInRoom(n),this.world[i.y][i.x]=d,this.enter={x:i.x,y:i.y,room_id:n},this.rooms[n].enter=!0,i=this.rooms[n].doors[0],this.doors[i].enter=!0,void 0!==(n=e.pop()))&&(i=this.randomNonEdgeInRoom(n),this.world[i.y][i.x]=f,this.exit={x:i.x,y:i.y,room_id:n},this.rooms[n].exit=!0,i=this.rooms[n].doors[0],this.doors[i].exit=!0,this.deadends=e)}},{key:"randomNonEdgeInRoom",value:function(t){t=this.rooms[t];return{x:this.randomFn(t.left+1,t.left+t.width-2),y:this.randomFn(t.top+1,t.top+t.height-2)}}},{key:"addDoor",value:function(t,e,r,o,i){this.world[e][t]=l;var n=this.door_id++;return this.doors[n]={x:t,y:e,id:n,orientation:i,rooms:[r,o]},this.rooms[r].doors.push(n),this.rooms[o].doors.push(n),n}},{key:"randomFn",value:function(t,e){t=Math.floor(t),e=Math.floor(e);return Math.floor(this.random()*(e+1-t)+t)}},{key:"randomOdd",value:function(t,e){var t=Math.floor(t),e=Math.floor(e),r=(t%2==0&&t++,e%2==0&&e--,--t,--e,t/=2,e/=2,this.random()),r=Math.floor(r*(e+1-t)+t);return r*=2,++r}},{key:"shuffle",value:function(t){for(var e,r,o=t.length;o;e=Math.floor(this.random()*o),r=t[--o],t[o]=t[e],t[e]=r);}}])&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}()},{}],19:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){t.fill(1);for(var r=Math.min(t.width,t.height)/2,o=t.width/2,i=t.height/2,n=0;n<t.height;n++)for(var a=0;a<t.width;a++)Math.pow(a-o,2)+Math.pow(n-i,2)<=Math.pow(r,2)&&(t.data[n*t.width+a]=0)}},{}],20:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){t.fill(0);for(var r=Math.min(t.width,t.height),o=Math.floor((t.width-r)/2),i=Math.floor((t.height-r)/2),n=i;n<i+r;n++)for(var a=o;a<o+r;a++)t.data[n*t.width+a]=1}},{}],21:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){t.fill(0);for(var r=t.height,o=t.width,i=0;i<r;i++)for(var n=0;n<=i;n++)t.data[i*o+n]=1}},{}],22:[function(t,e,r){"use strict";function d(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var r;if(t)return"string"==typeof t?o(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){for(var r=e.iterations||100,o=e.heightIncrease||.01,i=new Array(t.width*t.height).fill(0),n=0;n<r;n++)for(var a=t.random()-.5,s=t.random()-.5,h=t.random(),l=0;l<t.height;l++)for(var u=0;u<t.width;u++)0<a*u+s*l-h&&(i[l*t.width+u]+=o);!function(t,e){for(var r=Math.max.apply(Math,d(e)),o=Math.min.apply(Math,d(e)),i=0;i<e.length;i++){var n=(e[i]-o)/(r-o);t.data[i]=n}}(t,i)}},{}],23:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){for(var r=e.scale||.1,o=0;o<t.height;o++)for(var i=0;i<t.width;i++){var n=t.noise(i*r,o*r);t.data[o*t.width+i]=n}}},{}],24:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=function(){var s=624,r=2147483648,o=2147483647,h=new Array(s),i=625;function l(t){return t<0?(t^r)+r:t}function u(t,e){return l(t+e&4294967295)}function d(t,e){for(var r=0,o=0;o<32;++o)t>>>o&1&&(r=u(r,l(e<<o)));return r}this.init_genrand=function(t){for(h[0]=l(4294967295&t),i=1;i<s;i++)h[i]=u(d(1812433253,l(h[i-1]^h[i-1]>>>30)),i),h[i]=l(4294967295&h[i])},this.init_by_array=function(t,e){var r,o,i,n,a;for(this.init_genrand(19650218),r=1,o=0,i=e<s?s:e;i;i--)h[r]=u(u(l(h[r]^d(l(h[r-1]^h[r-1]>>>30),1664525)),t[o]),o),h[r]=l(4294967295&h[r]),o++,s<=++r&&(h[0]=h[623],r=1),e<=o&&(o=0);for(i=623;i;i--)h[r]=(n=l((dbg=h[r])^d(l(h[r-1]^h[r-1]>>>30),1566083941)))<(a=r)?l(4294967296-(a-n)&4294967295):n-a,h[r]=l(4294967295&h[r]),s<=++r&&(h[0]=h[623],r=1);h[0]=2147483648};var n=[0,2567483615];this.genrand_int32=function(){var t,e;if(s<=i){for(625==i&&this.init_genrand(5489),e=0;e<227;e++)t=l(h[e]&r|h[e+1]&o),h[e]=l(h[e+397]^t>>>1^n[1&t]);for(;e<623;e++)t=l(h[e]&r|h[e+1]&o),h[e]=l(h[e+-227]^t>>>1^n[1&t]);t=l(h[623]&r|h[0]&o),h[623]=l(h[396]^t>>>1^n[1&t]),i=0}return t=l((t=h[i++])^t>>>11),t=l(t^t<<7&2636928640),t=l(t^t<<15&4022730752),t=l(t^t>>>18)},this.genrand_int31=function(){return this.genrand_int32()>>>1},this.genrand_real1=function(){return this.genrand_int32()*(1/4294967295)},this.genrand_real2=function(){return this.genrand_int32()*(1/4294967296)},this.genrand_real3=function(){return(this.genrand_int32()+.5)*(1/4294967296)},this.genrand_res53=function(){return 1/9007199254740992*(67108864*(this.genrand_int32()>>>5)+(this.genrand_int32()>>>6))}}},{}],25:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){var e=[];if(void 0!==t.data[0][0])for(var r=t.data.length,o=0;o<r;o++)e.push({data:t.data[o].flat(),height:t.height,id:o+1,name:"Tile Layer ".concat(o+1),opacity:1,type:"tilelayer",visible:!0,width:t.width,x:0,y:0,parallaxoriginy:o/r});else e.push({data:t.data,height:t.height,id:1,name:"Tile Layer 1",opacity:1,type:"tilelayer",visible:!0,width:t.width,x:0,y:0});var i={compressionlevel:-1,height:t.height,infinite:!1,layers:e,nextlayerid:e.length+1,nextobjectid:1,orientation:"orthogonal",renderorder:"right-down",tiledversion:"1.10.2",tileheight:16,tilesets:[{columns:0,firstgid:1,grid:{height:1,orientation:"orthogonal",width:1},margin:0,name:"grass-land",spacing:0,tilecount:2,tileheight:16,tiles:[],tilewidth:16}],tilewidth:16,type:"map",version:"1.10",width:t.width};return i.tilesets[0].tiles=[{id:0,image:"tile-bush.png",imageheight:16,imagewidth:16},{id:1,image:"tile-grass.png",imageheight:16,imagewidth:16},{id:2,image:"tile-block.png",imageheight:16,imagewidth:16},{id:3,image:"tile-path-brown.png",imageheight:16,imagewidth:16},{id:4,image:"tile-path-green.png",imageheight:16,imagewidth:16}],i}},{}],26:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(t=t("./MersenneTwister19937.js"))&&t.__esModule?t:{default:t};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r.default=function(){var r=new o.default,t=(new Date).getTime()%1e9;this.currentSeed=t,r.init_genrand(t),this.rand=function(t,e){return void 0===t?r.genrand_real2():(void 0===e&&(e=0),Math.floor(r.genrand_real2()*(t-e)+e))},this.seed=function(t){var e=Number(t);if("number"!=typeof(e=isNaN(e)?this.stringToSeed(t):e))throw new Error("seed(S) must take numeric argument; is "+i(t));this.currentSeed=e,r.init_genrand(e)},this.seed_array=function(t){if("object"!=i(t))throw new Error("seed_array(A) must take array of numbers; is "+i(t));this.currentSeed=t,r.init_by_array(t,t.length)},this.stringToSeed=function(t){for(var e=0,r=0;r<t.length;r++){e=(e<<5)-e+t.charCodeAt(r);e&=e}return e}}},{"./MersenneTwister19937.js":24}],27:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;function o(){}function w(t){return.5*(1-Math.cos(t*Math.PI))}var b,x=4095,M=4,j=.5;o.prototype.noise=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null==b){b=new Array(4096);for(var o=0;o<4096;o++)b[o]=Math.random()}t<0&&(t=-t),e<0&&(e=-e),r<0&&(r=-r);for(var i,n,a=Math.floor(t),s=Math.floor(e),h=Math.floor(r),l=t-a,u=e-s,d=r-h,f=0,c=.5,m=0;m<M;m++){var y=a+(s<<4)+(h<<8),v=w(l),g=w(u),p=b[y&x];p+=v*(b[y+1&x]-p),i=b[y+16&x],p+=g*((i+=v*(b[y+16+1&x]-i))-p),i=b[(y+=256)&x],i+=v*(b[y+1&x]-i),n=b[y+16&x],i+=g*((n+=v*(b[y+16+1&x]-n))-i),f+=(p+=w(d)*(i-p))*c,c*=j,a<<=1,s<<=1,h<<=1,1<=(l*=2)&&(a++,l--),1<=(u*=2)&&(s++,u--),1<=(d*=2)&&(h++,d--)}return f},o.prototype.noiseDetail=function(t,e){0<t&&(M=t),0<e&&(j=e)},o.prototype.noiseSeed=function(t){o=4294967296;var e,r,o,i={setSeed:function(t){r=e=(null==t?Math.random()*o:t)>>>0},getSeed:function(){return e},rand:function(){return(r=(1664525*r+1013904223)%o)/o}};i.setSeed(t),b=new Array(4096);for(var n=0;n<4096;n++)b[n]=i.rand()},r.default=o},{}]},{},[1])(1)});
//# sourceMappingURL=labyrinthos.min.js.map