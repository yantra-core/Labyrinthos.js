!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).LABY=t()}(function(){return function i(o,n,a){function h(e,t){if(!n[e]){if(!o[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(s)return s(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}r=n[e]={exports:{}},o[e][0].call(r.exports,function(t){return h(o[e][1][t]||t)},r,r.exports,i,o,n,a)}return n[e].exports}for(var s="function"==typeof require&&require,t=0;t<a.length;t++)h(a[t]);return h}({1:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Tile",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"TileMap",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"labyrinthos",{enumerable:!0,get:function(){return i.default}}),r.utils=r.terrains=r.shapes=r.mazes=void 0;var i=a(t("./lib/labyrinthos.js")),o=a(t("./lib/Tile.js")),n=a(t("./lib/TileMap.js"));function a(t){return t&&t.__esModule?t:{default:t}}r.mazes=i.default.mazes,r.terrains=i.default.terrains,r.shapes=i.default.shapes,r.utils=i.default.utils},{"./lib/Tile.js":2,"./lib/TileMap.js":3,"./lib/labyrinthos.js":4}],2:[function(t,e,r){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:String(t)}(i.key),i)}}function n(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=n(function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.type=e})},{}],3:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=o(t("./util/generateTiledJSON.js")),d=o(t("./util/mersenne.js")),f=o(t("./util/noise.js"));function o(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var r;if(t)return"string"==typeof t?a(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==n(t)?t:String(t)}(i.key),i)}}r.default=function(){function u(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.x,e=void 0===e?0:e,r=t.y,r=void 0===r?0:r,i=t.width,o=t.height,n=t.depth,a=t.tileWidth,h=t.tileHeight,t=t.is3D,t=void 0!==t&&t,s=this,l=u;if(!(s instanceof l))throw new TypeError("Cannot call a class as a function");this.x=e,this.y=r,this.width=i,this.height=o,this.depth=n,this.tileWidth=a,this.tileHeight=h,this.is3D=t,this.mersenneTwister=new d.default,this.Noise=new f.default,this.noise=this.Noise.noise,this.seedNoise=this.Noise.noiseSeed,this.data=this.initializeDataArray({width:i,height:o,is3D:t}),this.defaultRogueLike=["-","#","+","0","<",">","$","#","@","&","?"]}var t,e,r;return t=u,(e=[{key:"initializeDataArray",value:function(){var t=this.is3D?function(t,e,r){for(var i=[],o=0;o<r;o++)i.push(l(t,e));return i}(this.width,this.height,this.depth):l(this.width,this.height);return t}},{key:"fill",value:function(t){if(this.is3D)for(var e=0;e<this.depth;e++);else this.fill2D(t)}},{key:"fill2D",value:function(t){for(var e=0;e<this.height*this.width;e++)this.data[e]=t}},{key:"random",value:function(t){return this.mersenneTwister.rand(t)}},{key:"seed",value:function(t){this.mersenneTwister.seed(t),this.seedNoise(t)}},{key:"use",value:function(t,e,r){for(var i=0;i<t.height;i++)for(var o=0;o<t.width;o++){var n=o+e,a=i+r;n<this.width&&a<this.height&&(this.data[a*this.width+n]=t.data[i*t.width+o])}}},{key:"scaleToTileRange",value:function(t){for(var e=this.data,r=Math.max.apply(Math,h(e)),i=Math.min.apply(Math,h(e)),o=t-1,n=0;n<e.length;n++){var a=(e[n]-i)/(r-i);this.data[n]=Math.round(a*o)+1}}},{key:"mask",value:function(t){for(var e=t||this.defaultRogueLike,r="",i=0;i<this.height;i++){for(var o=0;o<this.width;o++)r+=e[this.data[i*this.width+o]%e.length];r+="\n"}return r}},{key:"toJSON",value:function(){return JSON.stringify({width:this.width,height:this.height,tileWidth:this.tileWidth,tileHeight:this.tileHeight,is3D:this.is3D,data:this.data},null,2)}},{key:"toTiledJSON",value:function(){return(0,i.default)(this)}}])&&s(t.prototype,e),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}();function l(t,e){return new Array(t*e).fill(0)}},{"./util/generateTiledJSON.js":19,"./util/mersenne.js":20,"./util/noise.js":21}],4:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=p(t("./Tile.js")),o=p(t("./TileMap.js")),n=p(t("./mazes/AldousBroder.js")),a=p(t("./mazes/BinaryTree.js")),h=p(t("./mazes/CellularAutomata.js")),s=p(t("./mazes/EllersAlgorithm.js")),l=p(t("./mazes/GrowingTree.js")),u=p(t("./mazes/RecursiveBacktrack.js")),d=p(t("./mazes/RecursiveDivision.js")),f=p(t("./mazes/ThomasHunter.js")),c=p(t("./shapes/Circle.js")),m=p(t("./shapes/Square.js")),y=p(t("./shapes/Triangle.js")),g=p(t("./terrains/FaultLine.js")),v=p(t("./terrains/PerlinNoise.js")),t=p(t("./util/noise.js"));function p(t){return t&&t.__esModule?t:{default:t}}var w={mazes:{}};w.mazes.AldousBroder=n.default,w.mazes.BinaryTree=a.default,w.mazes.CellularAutomata=h.default,w.mazes.EllersAlgorithm=s.default,w.mazes.GrowingTree=l.default,w.mazes.RecursiveBacktrack=u.default,w.mazes.RecursiveDivision=d.default,w.mazes.ThomasHunter=f.default,w.shapes={},w.shapes.Circle=c.default,w.shapes.Square=m.default,w.shapes.Triangle=y.default,w.terrains={},w.terrains.FaultLine=g.default,w.terrains.PerlinNoise=v.default,w.utils={},w.utils.noise=t.default,w.Tile=i.default,w.TileMap=o.default,r.default=w},{"./Tile.js":2,"./TileMap.js":3,"./mazes/AldousBroder.js":5,"./mazes/BinaryTree.js":6,"./mazes/CellularAutomata.js":7,"./mazes/EllersAlgorithm.js":8,"./mazes/GrowingTree.js":9,"./mazes/RecursiveBacktrack.js":10,"./mazes/RecursiveDivision.js":11,"./mazes/ThomasHunter.js":12,"./shapes/Circle.js":13,"./shapes/Square.js":14,"./shapes/Triangle.js":15,"./terrains/FaultLine.js":16,"./terrains/PerlinNoise.js":17,"./util/noise.js":21}],5:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){t.fill(1);var r=0,i=t.width*t.height/4,o=2*Math.floor(Math.random()*Math.floor(t.width/2)),n=2*Math.floor(Math.random()*Math.floor(t.height/2));t.data[n*t.width+o]=0,r++;for(;r<i;){var a=[[2,0],[-2,0],[0,2],[0,-2]],a=a[Math.floor(Math.random()*a.length)],h=o+a[0],s=n+a[1];0<=h&&h<t.width&&0<=s&&s<t.height&&(1===t.data[s*t.width+h]&&(t.data[(n+a[1]/2)*t.width+(o+a[0]/2)]=0,t.data[s*t.width+h]=0,r++),o=h,n=s)}}},{}],6:[function(t,e,r){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){t.fill(1);for(var r=0;r<t.height;r+=2)for(var i=0;i<t.width;i+=2){t.data[r*t.width+i]=0;var o,n=[];i+2<t.width&&n.push([2,0]),r+2<t.height&&n.push([0,2]),0<n.length&&(o=Math.floor(t.random()*n.length),n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,o,n,a,h=[],s=!0,l=!1;try{if(n=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(i=n.call(r)).done)&&(h.push(i.value),h.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return h}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?a(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n[o],2),o=n[0],n=n[1],t.data[(r+n)*t.width+(i+o)]=0,t.data[(r+n/2)*t.width+(i+o/2)]=0)}}},{}],7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){for(var r=e.wallChance||.45,i=e.iterations||4,o=e.neighborThreshold||4,n=0;n<t.height;n++)for(var a=0;a<t.width;a++)t.data[n*t.width+a]=t.random()<r?0:1;for(var h=0;h<i;h++){for(var s=new Array(t.width*t.height).fill(1),l=0;l<t.height;l++)for(var u=0;u<t.width;u++){for(var d=0,f=-1;f<=1;f++)for(var c,m,y=-1;y<=1;y++)0===y&&0===f||(m=l+f,0<=(c=u+y)&&c<t.width&&0<=m&&m<t.height?d+=0===t.data[m*t.width+c]?1:0:d++);s[l*t.width+u]=o<=d?0:1}t.data=s}}},{}],8:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){t.data.fill(0);var n={};function a(t,e){var r="".concat(t,",").concat(e);return n[r]||(r=e,e="".concat(e=t,",").concat(r),n[e]={id:e,cells:[e]},n[e])}function r(t,e,r,i){var o=a(t,e),t=a(r,i);o.id!==t.id&&t.cells.forEach(function(t){o.cells.push(t),n[t]=o})}for(var i=0;i<t.height;i+=2){for(var o=0;o<t.width-2;o+=2).5<t.random()&&(r(o,i,o+2,i),t.data[i*t.width+o+1]=1);if(i<t.height-2)for(var h={},s=0;s<t.width;s+=2){var l=a(s,i).id;!h[l]&&.5<t.random()&&(r(s,i,s,i+2),t.data[(i+1)*t.width+s]=1,h[l]=!0)}}for(var u=0;u<t.width-2;u+=2)a(u,t.height-1).id!==a(u+2,t.height-1).id&&(r(u,t.height-1,u+2,t.height-1),t.data[(t.height-1)*t.width+u+1]=1)}},{}],9:[function(t,e,r){"use strict";function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,o,n,a,h=[],s=!0,l=!1;try{if(n=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(i=n.call(r)).done)&&(h.push(i.value),h.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return h}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?i(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(l,t){var u=1;l.data.fill(0);function e(){var t,e,r,i,o,n=f(d[d.length-1],2),a=n[0],h=n[1],s=[];[[0,-2],[0,2],[2,0],[-2,0]].forEach(function(t){var t=f(t,2),e=t[0],t=t[1],e=a+e,t=h+t;0<=e&&e<l.width&&0<=t&&t<l.height&&0===l.data[t*l.width+e]&&s.push([e,t])}),0<s.length?(n=Math.floor(l.random()*s.length),t=(n=f(s[n],2))[0],n=n[1],e=a,r=h,i=t,o=n,l.data[r*l.width+e]=u,l.data[Math.floor((r+o)/2)*l.width+Math.floor((e+i)/2)]=u,l.data[o*l.width+i]=u,d.push([t,n])):d.pop()}var r=Math.floor(l.random()*l.width),i=Math.floor(l.random()*l.height),d=[[r,i]];for(;0<d.length;)e()}},{}],10:[function(t,e,r){"use strict";function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,o,n,a,h=[],s=!0,l=!1;try{if(n=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(i=n.call(r)).done)&&(h.push(i.value),h.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return h}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?i(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(a,t){function h(t,e){var r=[];return 0<t&&!u[e][t-1]&&r.push([t-1,e]),0<e&&!u[e-1][t]&&r.push([t,e-1]),t<a.width-1&&!u[e][t+1]&&r.push([t+1,e]),e<a.height-1&&!u[e+1][t]&&r.push([t,e+1]),r}function s(t,e,r,i){e=e*a.width+t,t=i*a.width+r,a.data[Math.min(e,t)]=0}var l=[],u=Array.from({length:a.height},function(){return Array(a.width).fill(!1)}),e=Math.floor(a.random(a.width)),r=Math.floor(a.random(a.height));!function(t,e){for(u[e][t]=!0,l.push([t,e]);0<l.length;){var r,i=d(l[l.length-1],2),o=i[0],i=i[1],n=h(o,i);0<n.length?(r=(n=d(n[Math.floor(a.random(n.length))],2))[0],n=n[1],s(o,i,r,n),u[n][r]=!0,l.push([r,n])):l.pop()}}(e,r)}},{}],11:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(f,t){f.data.fill(1),function t(e,r,i,o){if(!(i-e<2||o-r<2)){for(var n=i-e<o-r,a=n?e:Math.floor(f.random(i-e-2))+e+1,h=n?Math.floor(f.random(o-r-2))+r+1:r,s=n?Math.floor(f.random(i-e))+e:a,l=n?h:Math.floor(f.random(o-r))+r,u=e;u<i;u++)for(var d=r;d<o;d++)(n&&u===a&&d!==l||!n&&d===h&&u!==s)&&(f.data[d*f.width+u]=0);n?(t(e,r,i,h),t(e,h,i,o)):(t(e,r,a,o),t(a,r,i,o))}}(0,0,f.width,f.height)}},{}],12:[function(t,e,r){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:String(t)}(i.key),i)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){t.fill(1);t.width,t.height;var r=Math.sqrt(Math.max(t.width,t.height));r%2!=1&&r++;for(var i=t.width/r*t.width/r/2,o=new b({width:t.width,height:t.height,retry:100,special:!0,room:{ideal:e.roomCount||i,min_width:e.roomMinWidth||r-2,max_width:e.roomMaxWidth||r+2,min_height:e.roomMinHeight||r-2,max_height:e.roomMinHeight||r+2}}).build(function(){return t.mersenneTwister.rand()}).world.reduce(function(t,e){return t.concat(e)},[]),n=0;n<t.data.length;n++)t.data[n]=o[n]};var a=0,h=1,s=2,l=3,u=4,d=5,f=6,c=21,m=21,y=3,g=7,v=3,p=7,w=10,b=function(){function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this,r=i;if(!(e instanceof r))throw new TypeError("Cannot call a class as a function");(t=t||{}).room||(t.room={}),this.max_width=t.width||c,this.max_height=t.height||m,this.room_min_width=t.room.min_width||y,this.room_max_width=t.room.max_width||g,this.room_min_height=t.room.min_height||v,this.room_max_height=t.room.max_height||p,this.room_ideal_count=t.room.ideal||w,this.retry_count=t.retry||w,this.want_special=!!t.special}var t,e,r;return t=i,(e=[{key:"render",value:function(){for(var t=((1<arguments.length?arguments[1]:void 0)||this.build()).world,e="",r=0;r<t.length;r++){for(var i="",o=0;o<t[r].length;o++){var n=t[r][o];i+=0===n?" ":1===n?".":2===n?"#":3===n?"/":4===n?"X":5===n?"<":6===n?">":t[r][o]}e+=i+"\n"}return e}},{key:"build",value:function(t){return this.random=t||function(){return Math.random()},this.world=null,this.rooms={},this.doors={},this.walls=[],this.enter=null,this.exit=null,this.special=null,this.deadends=[],this.room_id=0,this.door_id=0,this.createVoid(),this.addStarterRoom(),this.generateRooms(),this.addSpecialRooms(),this.buildWalls(),{width:this.max_width,height:this.max_height,enter:this.enter,exit:this.exit,deadends:this.deadends,special:this.special,door_count:this.door_id,doors:this.doors,room_count:this.room_id,rooms:this.rooms,walls:this.walls,world:this.world}}},{key:"createVoid",value:function(){for(var t=[],e=0;e<this.max_height;e++){t[e]=[];for(var r=0;r<this.max_width;r++)t[e][r]=a}this.world=t}},{key:"addStarterRoom",value:function(){var t=this.getRoomDimensions(),e=this.max_width-(t.width+2)+1,r=this.max_height-(t.height+2)+1,e=this.randomOdd(1,e),r=this.randomOdd(1,r);this.addRoom(e,r,t.width,t.height)}},{key:"getRoomDimensions",value:function(){return{width:this.randomOdd(this.room_min_width,this.room_max_width),height:this.randomOdd(this.room_min_height,this.room_max_height)}}},{key:"addRoom",value:function(t,e,r,i){var o=this.room_id++;this.rooms[o]={left:t,top:e,width:r,height:i,id:o,walls:[],neighbors:[],doors:[]};for(var n=e;n<e+i;n++)for(var a=t;a<t+r;a++)this.world[n][a]=h;return o}},{key:"addFloor",value:function(t,e){this.world[e][t]=h}},{key:"generateRooms",value:function(){for(var t=this.retry_count;this.room_id<this.room_ideal_count&&(this.generateRoom()||!(--t<=0)););}},{key:"generateRoom",value:function(){var t,e,r=this.randomFn(0,3),i=1===r?1:3===r?-1:0,o=0===r?1:2===r?-1:0,n=this.getRoomDimensions();if(0===r?e=this.randomOdd(t=1,this.max_width-n.width-2):1===r?(t=this.randomOdd(1,this.max_height-n.height-2),e=1):2===r?(t=this.max_height-n.height-1,e=this.randomOdd(1,this.max_width-n.width-2)):3===r&&(t=this.randomOdd(1,this.max_height-n.height-2),e=this.max_width-n.width-1),!1!==this.collides(t,e,n.width,n.height))return!1;for(var a=null;!1===(a=this.collides(t+o,e+i,n.width,n.height));)if(this.invalid(t+=o,e+=i,n.width,n.height))return!1;r=this.addRoom(e,t,n.width,n.height);return this.addDoorBetweenRooms(i,o,a,r),!0}},{key:"collides",value:function(t,e,r,i){for(var o=t,n=e,a=r,h=i,s=0;s<this.room_id;s++){var l=this.rooms[s];if(!(n>l.left+l.width||n+a<l.left||o>l.top+l.height||o+h<l.top))return l.id}return!1}},{key:"invalid",value:function(t,e,r,i){return t<=1||e<=1||t+i>=this.max_height-1||e+r>=this.max_width-1}},{key:"buildWalls",value:function(){for(var t=this.rooms,e=0;e<this.room_id;e++){for(var r=t[e],i=r.left-1;i<r.left+r.width+1;i++)this.addWall(i,r.top-1,r);for(var o=r.top;o<r.top+r.height;o++)this.addWall(r.left+r.width,o,r);for(var n=r.left-1;n<r.left+r.width+1;n++)this.addWall(n,r.top+r.height,r);for(var a=r.top;a<r.top+r.height;a++)this.addWall(r.left-1,a,r)}}},{key:"addWall",value:function(t,e,r){this.world[e][t]===a&&(this.world[e][t]=s,this.walls.push([t,e])),this.world[e][t]!==a&&this.world[e][t]!==s||r.walls.push([t,e])}},{key:"addDoorBetweenRooms",value:function(t,e,r,i){var o,n,a,h=this.rooms[r],s=this.rooms[i];1===t?(o=h.left-1,n=this.randomFn(Math.max(h.top,s.top)+1,Math.min(h.top+h.height,s.top+s.height)-2),a="h"):-1===t?(o=s.left-1,n=this.randomFn(Math.max(s.top,h.top)+1,Math.min(s.top+s.height,h.top+h.height)-2),a="h"):-1===e?(o=this.randomFn(Math.max(h.left,s.left)+1,Math.min(h.left+h.width,s.left+s.width)-2),n=s.top-1,a="v"):1===e&&(o=this.randomFn(Math.max(s.left,h.left)+1,Math.min(s.left+s.width,h.left+h.width)-2),n=h.top-1,a="v"),this.addDoor(o,n,r,i,a),this.rooms[r].neighbors.push(i),this.rooms[i].neighbors.push(r)}},{key:"addSpecialRooms",value:function(){for(var t,e=[],r={id:null,area:1/0},i=0;i<this.room_id;i++)1===(t=this.rooms[i]).neighbors.length&&(this.rooms[i].deadend=!0,e.push(i),t.width*t.height<r.area)&&(r.id=i);this.want_special&&2<=e.length&&(n=e.indexOf(r.id),e.splice(n,1),n=this.rooms[r.id].doors[0],this.special={room_id:o=r.id,door_id:n},(n=this.doors[n]).special=!0,this.rooms[o].special=!0,this.world[n.y][n.x]=u),this.shuffle(e);var o=e.pop();if(void 0===o)throw new Error("Unable to find a dead end room for Enter!");var n=this.randomNonEdgeInRoom(o),n=(this.world[n.y][n.x]=d,this.enter={x:n.x,y:n.y,room_id:o},this.rooms[o].enter=!0,this.rooms[o].doors[0]),o=(this.doors[n].enter=!0,e.pop());if(void 0===o)throw new Error("Unable to find a dead end room for Exit!");n=this.randomNonEdgeInRoom(o),this.world[n.y][n.x]=f,this.exit={x:n.x,y:n.y,room_id:o},this.rooms[o].exit=!0,n=this.rooms[o].doors[0];this.doors[n].exit=!0,this.deadends=e}},{key:"randomNonEdgeInRoom",value:function(t){t=this.rooms[t];return{x:this.randomFn(t.left+1,t.left+t.width-2),y:this.randomFn(t.top+1,t.top+t.height-2)}}},{key:"addDoor",value:function(t,e,r,i,o){this.world[e][t]=l;var n=this.door_id++;return this.doors[n]={x:t,y:e,id:n,orientation:o,rooms:[r,i]},this.rooms[r].doors.push(n),this.rooms[i].doors.push(n),n}},{key:"randomFn",value:function(t,e){t=Math.floor(t),e=Math.floor(e);return Math.floor(this.random()*(e+1-t)+t)}},{key:"randomOdd",value:function(t,e){var t=Math.floor(t),e=Math.floor(e),r=(t%2==0&&t++,e%2==0&&e--,--t,--e,t/=2,e/=2,this.random()),r=Math.floor(r*(e+1-t)+t);return r*=2,++r}},{key:"shuffle",value:function(t){for(var e,r,i=t.length;i;e=Math.floor(this.random()*i),r=t[--i],t[i]=t[e],t[e]=r);}}])&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}()},{}],13:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){t.fill(1);for(var r=Math.min(t.width,t.height)/2,i=t.width/2,o=t.height/2,n=0;n<t.height;n++)for(var a=0;a<t.width;a++)Math.pow(a-i,2)+Math.pow(n-o,2)<=Math.pow(r,2)&&(t.data[n*t.width+a]=0)}},{}],14:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){t.fill(0);for(var r=Math.min(t.width,t.height),i=Math.floor((t.width-r)/2),o=Math.floor((t.height-r)/2),n=o;n<o+r;n++)for(var a=i;a<i+r;a++)t.data[n*t.width+a]=1}},{}],15:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){t.fill(0);for(var r=t.height,i=t.width,o=0;o<r;o++)for(var n=0;n<=o;n++)t.data[o*i+n]=1}},{}],16:[function(t,e,r){"use strict";function d(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var r;if(t)return"string"==typeof t?i(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){for(var r=e.iterations||100,i=e.heightIncrease||.01,o=new Array(t.width*t.height).fill(0),n=0;n<r;n++)for(var a=t.random()-.5,h=t.random()-.5,s=t.random(),l=0;l<t.height;l++)for(var u=0;u<t.width;u++)0<a*u+h*l-s&&(o[l*t.width+u]+=i);!function(t,e){for(var r=Math.max.apply(Math,d(e)),i=Math.min.apply(Math,d(e)),o=0;o<e.length;o++){var n=(e[o]-i)/(r-i);t.data[o]=n}}(t,o)}},{}],17:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){for(var r=e.scale||.1,i=0;i<t.height;i++)for(var o=0;o<t.width;o++){var n=t.noise(o*r,i*r);t.data[i*t.width+o]=n}}},{}],18:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=function(){var h=624,r=2147483648,i=2147483647,s=new Array(h),o=625;function l(t){return t<0?(t^r)+r:t}function u(t,e){return l(t+e&4294967295)}function d(t,e){for(var r=0,i=0;i<32;++i)t>>>i&1&&(r=u(r,l(e<<i)));return r}this.init_genrand=function(t){for(s[0]=l(4294967295&t),o=1;o<h;o++)s[o]=u(d(1812433253,l(s[o-1]^s[o-1]>>>30)),o),s[o]=l(4294967295&s[o])},this.init_by_array=function(t,e){var r,i,o,n,a;for(this.init_genrand(19650218),r=1,i=0,o=e<h?h:e;o;o--)s[r]=u(u(l(s[r]^d(l(s[r-1]^s[r-1]>>>30),1664525)),t[i]),i),s[r]=l(4294967295&s[r]),i++,h<=++r&&(s[0]=s[623],r=1),e<=i&&(i=0);for(o=623;o;o--)s[r]=(n=l((dbg=s[r])^d(l(s[r-1]^s[r-1]>>>30),1566083941)))<(a=r)?l(4294967296-(a-n)&4294967295):n-a,s[r]=l(4294967295&s[r]),h<=++r&&(s[0]=s[623],r=1);s[0]=2147483648};var n=[0,2567483615];this.genrand_int32=function(){var t,e;if(h<=o){for(625==o&&this.init_genrand(5489),e=0;e<227;e++)t=l(s[e]&r|s[e+1]&i),s[e]=l(s[e+397]^t>>>1^n[1&t]);for(;e<623;e++)t=l(s[e]&r|s[e+1]&i),s[e]=l(s[e+-227]^t>>>1^n[1&t]);t=l(s[623]&r|s[0]&i),s[623]=l(s[396]^t>>>1^n[1&t]),o=0}return t=l((t=s[o++])^t>>>11),t=l(t^t<<7&2636928640),t=l(t^t<<15&4022730752),t=l(t^t>>>18)},this.genrand_int31=function(){return this.genrand_int32()>>>1},this.genrand_real1=function(){return this.genrand_int32()*(1/4294967295)},this.genrand_real2=function(){return this.genrand_int32()*(1/4294967296)},this.genrand_real3=function(){return(this.genrand_int32()+.5)*(1/4294967296)},this.genrand_res53=function(){return 1/9007199254740992*(67108864*(this.genrand_int32()>>>5)+(this.genrand_int32()>>>6))}}},{}],19:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return{compressionlevel:-1,height:t.height,infinite:!1,layers:[{data:t.data,height:t.height,id:1,name:"Tile Layer 1",opacity:1,type:"tilelayer",visible:!0,width:t.width,x:0,y:0}],nextlayerid:2,nextobjectid:1,orientation:"orthogonal",renderorder:"right-down",tiledversion:"1.10.2",tileheight:16,tilesets:[{columns:0,firstgid:1,grid:{height:1,orientation:"orthogonal",width:1},margin:0,name:"grass-land",spacing:0,tilecount:2,tileheight:16,tiles:[{id:0,image:"tile-bush.png",imageheight:16,imagewidth:16},{id:1,image:"tile-grass.png",imageheight:16,imagewidth:16},{id:2,image:"tile-block.png",imageheight:16,imagewidth:16},{id:3,image:"tile-path-brown.png",imageheight:16,imagewidth:16},{id:4,image:"tile-path-green.png",imageheight:16,imagewidth:16}],tilewidth:16}],tilewidth:16,type:"map",version:"1.10",width:t.width}}},{}],20:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=(t=t("./MersenneTwister19937.js"))&&t.__esModule?t:{default:t};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r.default=function(){var r=new i.default,t=(new Date).getTime()%1e9;this.currentSeed=t,r.init_genrand(t),this.rand=function(t,e){return void 0===t?r.genrand_real2():(void 0===e&&(e=0),Math.floor(r.genrand_real2()*(t-e)+e))},this.seed=function(t){if("number"!=typeof t)throw new Error("seed(S) must take numeric argument; is "+o(t));this.currentSeed=t,r.init_genrand(t)},this.seed_array=function(t){if("object"!=o(t))throw new Error("seed_array(A) must take array of numbers; is "+o(t));this.currentSeed=t,r.init_by_array(t,t.length)}}},{"./MersenneTwister19937.js":18}],21:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;function i(){}function w(t){return.5*(1-Math.cos(t*Math.PI))}var b,_=4095,M=4,j=.5;i.prototype.noise=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null==b){b=new Array(4096);for(var i=0;i<4096;i++)b[i]=Math.random()}t<0&&(t=-t),e<0&&(e=-e),r<0&&(r=-r);for(var o,n,a=Math.floor(t),h=Math.floor(e),s=Math.floor(r),l=t-a,u=e-h,d=r-s,f=0,c=.5,m=0;m<M;m++){var y=a+(h<<4)+(s<<8),g=w(l),v=w(u),p=b[y&_];p+=g*(b[y+1&_]-p),o=b[y+16&_],p+=v*((o+=g*(b[y+16+1&_]-o))-p),o=b[(y+=256)&_],o+=g*(b[y+1&_]-o),n=b[y+16&_],o+=v*((n+=g*(b[y+16+1&_]-n))-o),f+=(p+=w(d)*(o-p))*c,c*=j,a<<=1,h<<=1,s<<=1,1<=(l*=2)&&(a++,l--),1<=(u*=2)&&(h++,u--),1<=(d*=2)&&(s++,d--)}return f},i.prototype.noiseDetail=function(t,e){0<t&&(M=t),0<e&&(j=e)},i.prototype.noiseSeed=function(t){i=4294967296;var e,r,i,o={setSeed:function(t){r=e=(null==t?Math.random()*i:t)>>>0},getSeed:function(){return e},rand:function(){return(r=(1664525*r+1013904223)%i)/i}};o.setSeed(t),b=new Array(4096);for(var n=0;n<4096;n++)b[n]=o.rand()},r.default=i},{}]},{},[1])(1)});
//# sourceMappingURL=labyrinthos.min.js.map